<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="utf-8" />
		<title>팀 상세 페이지</title>
		<link rel="stylesheet" th:href="@{/css/soccerTeam.css}" />
	</head>
	<body>
		<div class="container">
			<h2 th:text="${soccerTeam.teamName}"></h2>	
			
			<form id="frm" method="post">
				<input type="hidden" id="teamIdx" name="teamIdx" th:value="${soccerTeam.teamIdx}"/>
			
				<table class="soccerTeam_detail">
					<colgroup>
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					 	<col width="10%" />
					</colgroup>
					<tr>
						<th scope="row">글 번호</th>
						<td th:text="${soccerTeam.teamIdx}"></td>	
						<th scope="row">조회수</th>
						<td th:text="${soccerTeam.hitCnt}"></td>
					</tr>
					<tr>
						<th scope="row">제목</th>
						<td th:text="${soccerTeam.title}"></td>
						<th scope="row">작성자</th>
						<td th:text="${soccerTeam.creatorId}"></td>
						<th scope="row">작성일</th>
						<td th:text="${soccerTeam.createdDatetime}"></td>
						<th scope="row">수정일</th>
						<td th:text="${soccerTeam.updatedDatetime}"></td>
					</tr>
					<tr>
						<th scope="row">팀 이름</th>
						<td th:text="${soccerTeam.teamName}"></td>	
						<th scope="row">지역</th>
						<td th:text="${soccerTeam.region}"></td>
						<th scope="row">운영 기간</th>
						<td th:text="${soccerTeam.teamPeriod}"></td>
						<th scope="row">팀 연령대</th>
						<td th:text="${soccerTeam.teamOld}"></td>
						<th scope="row">선출 수</th>
						<td th:text="${soccerTeam.athleteNumber}"></td>
					</tr>
					<tr>
						<th scope="row">요일</th>
						<td th:text="${soccerTeam.teamDay}"></td>	
						<th scope="row">시간</th>
						<td th:text="${soccerTeam.teamTime}"></td>
					</tr>
					<tr>
						<th scope="row">연락처</th>
						<td th:text="${soccerTeam.teamNumber}"></td>
					</tr>
					<tr>
						<th scope="row">필요 포지션</th>
						<td th:text="${soccerTeam.needPosition}"></td>	
						<th scope="row">필요 포지션 수</th>
						<td th:text="${soccerTeam.needPositionNumber}"></td>
					</tr>
					<tr>
						<th scope="row">내용</th>
						<td th:text="${soccerTeam.contents}"></td>
					</tr>
					
		
				</table>
				
			</form>
			
			<!-- 첨부파일 목록 -->
			<!-- | 기호를 사용하면 변수와 고정된 문자열을 혼합해서 출력이 가능 -->
			<!-- 원본파일이름 (파일크기kb) 형식으로 출력 -->
			<div class="file_list">
				<a th:each="fileInfo : ${soccerTeam.fileInfoList}"
					th:text="|${fileInfo.originalFileName} (${#numbers.formatInteger(T(java.lang.Integer).parseInt(fileInfo.fileSize)/1024, 1, 'DEFAULT')}kb)|"
					th:href="@{'jpa/soccerTeam/downloadSoccerTeamFile.do?teamFileIdx=' + ${fileInfo.teamFileIdx} + '&teamIdx=' + ${soccerTeam.teamIdx}}"></a>
			</div>
			
			<input type="button" id="list" class="btn" value="목록으로"/>
			<input type="button" id="update" class="btn" value="수정하기"/>
			<input type="button" id="delete" class="btn" value="삭제하기"/>
			
			<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
			<script>
				$(function() {
					$('#list').on('click', function() {
						location.href = '/jpa/openSoccerTeamList.do';
					});
					$('#update').on('click', function() {
                        location.href = '/jpa/openSoccerTeamModify.do?teamIdx=' + $('#teamIdx').val();
                    });
					$('#delete').on('click', function() {
						let frm = $('#frm')[0];
						frm.action = "/jpa/deleteSoccerTeam.do";
						frm.submit();
					});
				});
			</script>
		</div>
		
		<div class="container_player">
			<h2>선수 등록</h2>	
			<table class="player_list">
				<colgroup>
					<col width="10%" />
					<col width="10%" />
					<col width= * />
					<col width="5%" />
					<col width="10%" />	
					<col width="10%" />
				</colgroup>
				<thead>
					<tr>
						<th scope="col">선출 여부</th>
						<th scope="col">선수 이름</th>
						<th scope="col">제목</th>
						<th scope="col">지역</th>
						<th scope="col">등록일</th>
						<th scope="col">수정일</th>
					</tr>
				</thead>                                              
				<tbody>                                           
	                <tr th:each="player : ${playerList}">
	                    <td th:text="${player.playerAthlete}"></td>     
	                    <td th:text="${player.playerName}"></td>        
	                    <td class="title">
	                        <a th:href="@{'/soccerTeam/openPlayerDetail.do?playerIdx=' + ${player.playerIdx}}" th:text="${player.title}"></a>
	                    </td>  
	                    <td th:text="${player.region}"></td>
	                    <td th:text="${player.createdDatetime}"></td>                
	                    <td th:text="${player.updatedDatetime}"></td>                
	                </tr>
	                <tr th:if="${#lists.isEmpty(playerList)}">
	                    <td colspan="6">조회된 결과가 없습니다.</td>
	                </tr>
	            </tbody>
			</table>
			
			<input type="button" id="write" class="btn" value="글쓰기"/>
			<script>
				$(function() {
					$('#write').on('click', function() {
                        location.href = 'openPlayerWrite.do?teamIdx=' + $('#teamIdx').val();
                    });
				});
			</script>
		</div>	
	</body>	
</html>
